<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>Blog Title</title><link>https://customsshen.github.io</link><description>Blog description</description><copyright>Blog Title</copyright><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>https://github.githubassets.com/favicons/favicon.svg</url><title>avatar</title><link>https://customsshen.github.io</link></image><lastBuildDate>Mon, 08 Apr 2024 03:23:25 +0000</lastBuildDate><managingEditor>Blog Title</managingEditor><ttl>60</ttl><webMaster>Blog Title</webMaster><item><title>Linux中用脚本添加crontab定时任务</title><link>https://customsshen.github.io/post/Linux-zhong-yong-jiao-ben-tian-jia-crontab-ding-shi-ren-wu.html</link><description>通常&#13;
我们常用的添加crontab定时任务方式是，手动执行命令：&#13;
``` linux&#13;
crontab -e&#13;
```&#13;
然后将任务脚本手动添加到文件中&#13;
&#13;
实际&#13;
实际中我们常常想在执行程序启动脚本时，自动添加crontab定时任务，例如通过crontab任务周期性删除程序产生的日志等等，我们可以使用如下脚本，通过脚本自动添加我们的crontab定时任务。</description><guid isPermaLink="true">https://customsshen.github.io/post/Linux-zhong-yong-jiao-ben-tian-jia-crontab-ding-shi-ren-wu.html</guid><pubDate>Mon, 08 Apr 2024 03:22:52 +0000</pubDate></item><item><title>打造docker最小的python容器</title><link>https://customsshen.github.io/post/da-zao-docker-zui-xiao-de-python-rong-qi.html</link><description># 打造docker最小的python容器&#13;
1. 如何打造最小 Python Docker 容器 https://b23.tv/BV1w54y1n72A&#13;
2. 現在已經是容器 (container) 的時代，團隊之間合作肯定要打包統一的 Docker Image 來解決環境不一致的問題，但是容器的大小決定了部署微服務的時間，本篇來介紹如何打造最小的 Python 容器。</description><guid isPermaLink="true">https://customsshen.github.io/post/da-zao-docker-zui-xiao-de-python-rong-qi.html</guid><pubDate>Mon, 08 Apr 2024 03:01:03 +0000</pubDate></item><item><title>修改DockerFile_毕竟尹稳健的博客 - CSDN 博客</title><link>https://customsshen.github.io/post/xiu-gai-DockerFile_-bi-jing-yin-wen-jian-de-bo-ke-%20-%20CSDN%20-bo-ke.html</link><description>## DockerFile&#13;
&#13;
#### DockerFile 构建过程&#13;
&#13;
Dockerfile 是用来构建 [Docker](https://so.csdn.net/so/search?q=Docker&amp;spm=1001.2101.3001.7020) 镜像的文本文件，也可以说是命令参数脚本。</description><guid isPermaLink="true">https://customsshen.github.io/post/xiu-gai-DockerFile_-bi-jing-yin-wen-jian-de-bo-ke-%20-%20CSDN%20-bo-ke.html</guid><pubDate>Mon, 08 Apr 2024 02:59:57 +0000</pubDate></item><item><title>修改【前端部署附录一】写给前端的 docker 极简入门</title><link>https://customsshen.github.io/post/xiu-gai-%E3%80%90-qian-duan-bu-shu-fu-lu-yi-%E3%80%91-xie-gei-qian-duan-de-%20docker%20-ji-jian-ru-men.html</link><description>持续创作，加速成长！这是我参与「掘金日新计划 · 6 月更文挑战」的第 4 天，点击查看活动详情&#13;
&#13;
大家好，我是山月，这是我最近新开的专栏： **前端部署系列** 。</description><guid isPermaLink="true">https://customsshen.github.io/post/xiu-gai-%E3%80%90-qian-duan-bu-shu-fu-lu-yi-%E3%80%91-xie-gei-qian-duan-de-%20docker%20-ji-jian-ru-men.html</guid><pubDate>Mon, 08 Apr 2024 02:58:10 +0000</pubDate></item><item><title>Docker - 通过容器安装部署 Mosquitto 服务教程（MQTT 服务器）</title><link>https://customsshen.github.io/post/Docker%20-%20-tong-guo-rong-qi-an-zhuang-bu-shu-%20Mosquitto%20-fu-wu-jiao-cheng-%EF%BC%88MQTT%20-fu-wu-qi-%EF%BC%89.html</link><description>### 1，MQTT 介绍&#13;
&#13;
MQTT 是一个基于客户端 - 服务器的消息发布 / 订阅传输协议。</description><guid isPermaLink="true">https://customsshen.github.io/post/Docker%20-%20-tong-guo-rong-qi-an-zhuang-bu-shu-%20Mosquitto%20-fu-wu-jiao-cheng-%EF%BC%88MQTT%20-fu-wu-qi-%EF%BC%89.html</guid><pubDate>Mon, 08 Apr 2024 02:45:53 +0000</pubDate></item><item><title>使用电信 TR069 内网架设 WireGuard 隧道异地组网 – Steins;Gate</title><link>https://customsshen.github.io/post/shi-yong-dian-xin-%20TR069%20-nei-wang-jia-she-%20WireGuard%20-sui-dao-yi-di-zu-wang-%20%E2%80%93%20Steins%3BGate.html</link><description>TR069 内网是运营商用于下发光猫管理网络的内网，同一运营商同一省份的内网中所有光猫互通，并且可以跑到链路速度。</description><guid isPermaLink="true">https://customsshen.github.io/post/shi-yong-dian-xin-%20TR069%20-nei-wang-jia-she-%20WireGuard%20-sui-dao-yi-di-zu-wang-%20%E2%80%93%20Steins%3BGate.html</guid><pubDate>Mon, 08 Apr 2024 02:39:49 +0000</pubDate></item><item><title>黑群晖DSM7.1.1激活Active Backup for Business套件的方法</title><link>https://customsshen.github.io/post/hei-qun-hui-DSM7.1.1-ji-huo-Active%20Backup%20for%20Business-tao-jian-de-fang-fa.html</link><description>DSM 7.2（64551）经验证依然有效，如第二步激活失败，请1.多试几次 2.清空cookie 3.更换浏览器。</description><guid isPermaLink="true">https://customsshen.github.io/post/hei-qun-hui-DSM7.1.1-ji-huo-Active%20Backup%20for%20Business-tao-jian-de-fang-fa.html</guid><pubDate>Mon, 08 Apr 2024 02:37:20 +0000</pubDate></item><item><title>修改搭建 MQTT 服务器（Docker 版）</title><link>https://customsshen.github.io/post/xiu-gai-da-jian-%20MQTT%20-fu-wu-qi-%EF%BC%88Docker%20-ban-%EF%BC%89.html</link><description># 总述&#13;
&#13;
## 文档介绍&#13;
&#13;
MQTT（Message Queuing Telemetry Transport，消息队列遥测传输协议），是一种基于发布 / 订阅（publish/subscribe）模式的 "轻量级" 通讯协议。</description><guid isPermaLink="true">https://customsshen.github.io/post/xiu-gai-da-jian-%20MQTT%20-fu-wu-qi-%EF%BC%88Docker%20-ban-%EF%BC%89.html</guid><pubDate>Mon, 08 Apr 2024 02:29:17 +0000</pubDate></item><item><title>vmware 官网无法注册 Zip or postal code 报错 - 下一朵云</title><link>https://customsshen.github.io/post/vmware%20-guan-wang-wu-fa-zhu-ce-%20Zip%20or%20postal%20code%20-bao-cuo-%20-%20-xia-yi-duo-yun.html</link><description>![](https://cos.orcy.net.cn/20221111165756.png)&#13;
&#13;
**一、问题描述**&#13;
&#13;
vmware 官网无法注册 Zip or postal code 报错 `Invalid Address Line,city,zip/postal code,country/territory combination` ，如下图 1&#13;
&#13;
![](https://cos.orcy.net.cn/20221111165204.png)&#13;
&#13;
图 1 Zip or postal code 报错&#13;
&#13;
**二、解决办法**&#13;
&#13;
不要切换中文语言，使用英语。</description><guid isPermaLink="true">https://customsshen.github.io/post/vmware%20-guan-wang-wu-fa-zhu-ce-%20Zip%20or%20postal%20code%20-bao-cuo-%20-%20-xia-yi-duo-yun.html</guid><pubDate>Mon, 08 Apr 2024 02:24:18 +0000</pubDate></item><item><title>Linux 配置 SSH 服务实现远程远程访问_使用 ssh 远程控制 linux_liguangxian2018 的博客 - CSDN 博客</title><link>https://customsshen.github.io/post/Linux%20-pei-zhi-%20SSH%20-fu-wu-shi-xian-yuan-cheng-yuan-cheng-fang-wen-_-shi-yong-%20ssh%20-yuan-cheng-kong-zhi-%20linux_liguangxian2018%20-de-bo-ke-%20-%20CSDN%20-bo-ke.html</link><description>1. 查询是否安装 SSH.&#13;
&#13;
```&#13;
rpm -pa |grep ssh&#13;
&#13;
```&#13;
&#13;
2. 如果没有安装 rmp:&#13;
&#13;
```&#13;
sudo apt-get install rpm          #ubuntu,debian&#13;
yum -y instal rpm                 #centos,redhat&#13;
&#13;
```&#13;
&#13;
3. 安装 SSH&#13;
&#13;
```&#13;
sudo apt-get install ssh&#13;
or&#13;
yum -y install openssh&#13;
&#13;
```&#13;
&#13;
4. 启动服务:&#13;
&#13;
```&#13;
service sshd start&#13;
or&#13;
/bin/systemctl restart sshd.service&#13;
or&#13;
/etc/init.d/sshd start&#13;
&#13;
```&#13;
&#13;
5. 配置端口:&#13;
&#13;
```&#13;
vim /etc/ssh/sshd_config&#13;
&#13;
```&#13;
&#13;
6. 将 port 前面的 #删除, 也可以更改其它端口.&#13;
&#13;
![](https://img-blog.csdn.net/20180330165807123?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpZ3Vhbmd4aWFuYmlu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)&#13;
&#13;
7. 允许 root 用户远程登录.&#13;
&#13;
![](https://img-blog.csdn.net/20180330165726332?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpZ3Vhbmd4aWFuYmlu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)&#13;
&#13;
8. 查看服务是否启动:&#13;
&#13;
```&#13;
ps -e | grep ssh&#13;
&#13;
```&#13;
&#13;
![](https://img-blog.csdn.net/20180330180326133?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpZ3Vhbmd4aWFuYmlu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)&#13;
&#13;
9. 远程登录:&#13;
&#13;
```&#13;
ssh name@192.168.0.128&#13;
&#13;
```&#13;
&#13;
![](https://img-blog.csdn.net/20180330180046753?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpZ3Vhbmd4aWFuYmlu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)&#13;
&#13;
10. 服务器与主机之间的文件的上传与下载:&#13;
&#13;
scp 服务器主机之间文件互传:[https://blog.csdn.net/liguangxianbin/article/details/79544182](https://blog.csdn.net/liguangxianbin/article/details/79544182)。</description><guid isPermaLink="true">https://customsshen.github.io/post/Linux%20-pei-zhi-%20SSH%20-fu-wu-shi-xian-yuan-cheng-yuan-cheng-fang-wen-_-shi-yong-%20ssh%20-yuan-cheng-kong-zhi-%20linux_liguangxian2018%20-de-bo-ke-%20-%20CSDN%20-bo-ke.html</guid><pubDate>Mon, 08 Apr 2024 02:23:48 +0000</pubDate></item><item><title>esxi查看硬盘健康状况以及卸载软件包</title><link>https://customsshen.github.io/post/esxi-cha-kan-ying-pan-jian-kang-zhuang-kuang-yi-ji-xie-zai-ruan-jian-bao.html</link><description># esxcli&#13;
&#13;
## 列出硬盘&#13;
&#13;
```bash&#13;
esxcli storage core device list|grep "Display Name"&#13;
```&#13;
&#13;
查看smart&#13;
&#13;
```bash&#13;
esxcli storage core device smart get -d t10.NVMe____ZHITAI_PC005_Active_512GB_______________4100E7D000B728A4&#13;
```。</description><guid isPermaLink="true">https://customsshen.github.io/post/esxi-cha-kan-ying-pan-jian-kang-zhuang-kuang-yi-ji-xie-zai-ruan-jian-bao.html</guid><pubDate>Mon, 08 Apr 2024 02:23:12 +0000</pubDate></item><item><title>ESXi8.0 虚拟机安装黑群晖 7.1.1_esxi 安装黑群晖_李佑辰的博客 - CSDN 博客</title><link>https://customsshen.github.io/post/ESXi8.0%20-xu-ni-ji-an-zhuang-hei-qun-hui-%207.1.1_esxi%20-an-zhuang-hei-qun-hui-_-li-you-chen-de-bo-ke-%20-%20CSDN%20-bo-ke.html</link><description>**ESXi** **虚拟机安装群辉 7.1**&#13;
&#13;
**一、准备工作：**&#13;
&#13;
**ESXi 虚拟机一台，版本任意**&#13;
&#13;
**群辉 VMDk 引导文件 （文章末尾有提供下载）**&#13;
&#13;
**群辉系统安装（pat）文件**&#13;
&#13;
**支持兼容情况：ESXi5.5-ESXi8.0 均可正常安装使用。</description><guid isPermaLink="true">https://customsshen.github.io/post/ESXi8.0%20-xu-ni-ji-an-zhuang-hei-qun-hui-%207.1.1_esxi%20-an-zhuang-hei-qun-hui-_-li-you-chen-de-bo-ke-%20-%20CSDN%20-bo-ke.html</guid><pubDate>Mon, 08 Apr 2024 02:22:40 +0000</pubDate></item><item><title>我的esxi 拓扑图</title><link>https://customsshen.github.io/post/wo-de-esxi%20-tuo-pu-tu.html</link><description># alpine &#13;
修改网关指向旁路由IP&#13;
```bash&#13;
vim /etc/network/interface&#13;
```&#13;
## docker&#13;
安装代码&#13;
``` bash&#13;
apk update&#13;
apk add docker&#13;
rc-update add docker boot   #把 docker 添加到开机自启&#13;
service docker start        #启动docker&#13;
```&#13;
&#13;
###  emqx&#13;
 docker run -d --name emqx -p 18083:18083 -p 1883:1883 -p 11883:11883 emqx:latest&#13;
 &#13;
 需要设置默认admin密码 &#13;
 The `admins` command can be used to create/update/delete administrative users&#13;
emqx ctl admins username password&#13;
``` bash&#13;
emqx ctl admins&#13;
emqx ctl admins passwd  admin password&#13;
```&#13;
&#13;
###  qinglong&#13;
```bash&#13;
docker run -dit \&#13;
  -v $PWD/ql:/ql/data \&#13;
  -p 5700:5700 \&#13;
  --name qinglong \&#13;
  --hostname qinglong \&#13;
  --restart unless-stopped \&#13;
  whyour/qinglong:latest&#13;
&#13;
```&#13;
#### PThome签到&#13;
#### hdarea签到&#13;
#### 渡口签到&#13;
#### IKUUU签到&#13;
#### RSS推送&#13;
#### 公网IP变化推送&#13;
&#13;
``` docker&#13;
ql repo [https://github.com/customsshen/ql.git](https://github.com/customsshen/ql.git) "main"&#13;
&#13;
customsshen:ghp_b8Q8mTsNZSaiJeu2R5oT1LphzkKb1z06J!!!&#13;
```&#13;
&#13;
### portainer&#13;
``` docker&#13;
docker run -d --restart=always --name="portainer" -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock 6053537/portainer-ce&#13;
```&#13;
&#13;
# win10-test&#13;
 ## EDGE:tampermonkey 学习强国 js&#13;
 ## selenium 渡口签到&#13;
 ## WinSCP.exe&#13;
 ## openssh&#13;
 ## airtest 钉钉学习&#13;
&#13;
&#13;
# istoreOS&#13;
## 添加软件源&#13;
&gt; **系统---软件包---配置OPKG**&#13;
&gt; 两个核心步骤： &#13;
- 1注释掉检查签名**etc/opkg.conf**     # option check_signature &#13;
- 2添加软件源地址**etc/opkg/customfeeds.conf**，如x86的&#13;
~~~ vim&#13;
src/gz dllkids https://op.dllkids.xyz/packages/x86_64/&#13;
~~~&#13;
&#13;
## openclash&#13;
下载IPK [Releases · vernesong/OpenClash (github.com)](https://github.com/vernesong/OpenClash/releases)&#13;
## 打印机共享&#13;
## Homebox内网测速&#13;
http://192.168.1.250:3300&#13;
。</description><guid isPermaLink="true">https://customsshen.github.io/post/wo-de-esxi%20-tuo-pu-tu.html</guid><pubDate>Mon, 08 Apr 2024 02:17:38 +0000</pubDate></item><item><title>使用ha远程开关esxi下虚拟机</title><link>https://customsshen.github.io/post/shi-yong-ha-yuan-cheng-kai-guan-esxi-xia-xu-ni-ji.html</link><description>参考 [wake_on_lan + shell_command实现ESXi Server开关机 - 『HomeAssistant』综合讨论区 - 『瀚思彼岸』» 智能家居技术论坛 - Powered by Discuz! (hassbian.com)](https://bbs.hassbian.com/thread-11160-1-72.html)&#13;
&#13;
# 安装ha主机需要sshpass&#13;
docker 下安装sshpass&#13;
~~~ bash&#13;
$ docker exec -it ha bash&#13;
 apk add --update --no-cache sshpass&#13;
~~~&#13;
&#13;
# 安装成功后 添加configuration文件&#13;
~~~ json&#13;
switch:&#13;
&#13;
  - platform: command_line&#13;
&#13;
    switches:&#13;
&#13;
      centos:&#13;
&#13;
        command_on: "sshpass -p ssSS2326250. ssh -o stricthostkeychecking=no -p22 root@192.168.1.76 'vim-cmd vmsvc/power.on 4'"&#13;
&#13;
        command_off: "sshpass -p ssSS2326250. ssh -o stricthostkeychecking=no -p22 root@192.168.1.76 'vim-cmd vmsvc/power.off 4'"&#13;
&#13;
        command_state: "sshpass -p ssSS2326250. ssh -o stricthostkeychecking=no -p22 root@192.168.1.76'vim-cmd vmsvc/power.getstate 4|grep on|wc -l'"&#13;
&#13;
        value_template: '{{ value == "1" }}'&#13;
&#13;
        friendly_name: 虚拟机WIN7开关&#13;
~~~&#13;
&#13;
。</description><guid isPermaLink="true">https://customsshen.github.io/post/shi-yong-ha-yuan-cheng-kai-guan-esxi-xia-xu-ni-ji.html</guid><pubDate>Mon, 08 Apr 2024 02:17:15 +0000</pubDate></item><item><title>如何在 Ubuntu 22.04 LTS 中安装 Docker 和 Docker Compose</title><link>https://customsshen.github.io/post/ru-he-zai-%20Ubuntu%2022.04%20LTS%20-zhong-an-zhuang-%20Docker%20-he-%20Docker%20Compose.html</link><description>作者： [Sk](https://ostechnix.com/install-docker-ubuntu/) 译者： [LCTT](https://linux.cn/lctt/) [Donkey](/lctt/Donkey-Hao)&#13;
&#13;
| 2022-07-28 14:26   评论: [_2_](portal.php?mod=comment&amp;id=14871&amp;idtype=aid "查看全部评论") &#13;
&#13;
在 Ubuntu 中使用 Docker Compose 安装 Docker 引擎的分步指导。</description><guid isPermaLink="true">https://customsshen.github.io/post/ru-he-zai-%20Ubuntu%2022.04%20LTS%20-zhong-an-zhuang-%20Docker%20-he-%20Docker%20Compose.html</guid><pubDate>Mon, 08 Apr 2024 02:16:49 +0000</pubDate></item><item><title>利用 NutClient 使 ESXi 配合群晖 UPS 实现停电自动关机_NAS 存储_什么值得买</title><link>https://customsshen.github.io/post/li-yong-%20NutClient%20-shi-%20ESXi%20-pei-he-qun-hui-%20UPS%20-shi-xian-ting-dian-zi-dong-guan-ji-_NAS%20-cun-chu-_-shen-me-zhi-de-mai.html</link><description># 利用 NutClient 使 ESXi 配合群晖 UPS 实现停电自动关机&#13;
&#13;
2022-03-28 11:26:55 24 点赞 218 收藏 19 评论&#13;
&#13;
自去年入手山特 UPS 后（[有了 UPS 加持，再也不怕突然断电了](https://post.smzdm.com/p/a0dw82w0/)），后来又遇到过几次临时停电，虽然黑裙有了 UPS 的加持，是不用担心[硬盘](https://www.smzdm.com/fenlei/yingpan/)损毁了，但软路由里也有硬盘，虽然也连上了 UPS，但一直没去折腾停电自动关机，软路由功耗虽低，但 UPS 毕竟电量有限，遇到停电时间长点的，软路由也撑不住，正好前几天又突然停了一会儿电，于是决心要折腾折腾了&#13;
&#13;
软路由底层用的是 ESXi（6.7.0 Update3），最开始装了 iKuai 跟 op，玩了一段时间后，发现 op 对我来说用处不大，于是现在只剩下了 iKuai，期间打算去掉 ESXi，直接物理机装 iKuai，由于懒，一直也就没去动它&#13;
&#13;
![](https://res.smzdm.com/images/emotions/23.png)&#13;
&#13;
，这两天在度娘上看了半天，大部分都是写脚本，去 ping 一个接市电的地址，当停电 ping 不通时，实现 ESXi 关机，或者是 APC 的 UPS，安装 apcupsd 守护进程，奈何一不懂脚本，二不是 apc 家的 ups，正准备放弃的时候，看到有人在一个写脚本的教程下的留言提到了 NutClient，进一步了解后，发现这玩意儿挺简单的，蛮适合我这种啥也不懂但又忍不住想要折腾的人，于是就有了今天这篇经（liu）验（shui）帖（zhang）&#13;
&#13;
![](https://res.smzdm.com/images/emotions/44.png)&#13;
&#13;
### 1、准备工作&#13;
&#13;
NutClient 工具下载：下载第一个 NutClient-ESXi-2.7.4-2.2.2.i386.tar.gz（链接[Le journal de René - Client NUT pour ESXi 5, 6, 7 et 8Le journal de René (margar.fr)](http://rene.margar.fr/2012/05/client-nut-pour-esxi-5-0/)）&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408acda6a0c1175.png_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_2/)&#13;
&#13;
### 2、[群晖](https://pinpai.smzdm.com/2315/)&#13;
&#13;
[](https://pinpai.smzdm.com/2315/)&#13;
&#13;
[&#13;
&#13;
关注&#13;
&#13;
](https://pinpai.smzdm.com/2315/)[](javascript:;)&#13;
&#13;
品牌&#13;
&#13;
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAACbklEQVRoQ+2aMU4dMRCGZw6RC1CSSyQdLZJtKQ2REgoiRIpQkCYClCYpkgIESQFIpIlkW+IIcIC0gUNwiEFGz+hlmbG9b1nesvGW++zxfP7H4/H6IYzkwZFwQAUZmpJVkSeniFJKA8ASIi7MyfkrRPxjrT1JjZ8MLaXUDiJuzwngn2GJaNd7vyP5IoIYY94Q0fEQIKIPRGS8947zSQTRWh8CwLuBgZx479+2BTkHgBdDAgGAC+fcywoyIFWqInWN9BSONbTmFVp/AeA5o+rjKRJ2XwBYRsRXM4ZXgAg2LAPzOCDTJYQx5pSIVlrC3EI45y611osMTHuQUPUiYpiVooerg7TWRwDAlhSM0TuI+BsD0x4kGCuFSRVzSqkfiLiWmY17EALMbCAlMCmI6IwxZo+INgQYEYKBuW5da00PKikjhNNiiPGm01rrbwDwofGehQjjNcv1SZgddALhlJEgwgJFxDNr7acmjFLqCyJuTd6LEGFttpmkYC91Hrk3s1GZFERMmUT01Xv/sQljjPlMRMsxO6WULwnb2D8FEs4j680wScjO5f3vzrlNJszESWq2LYXJgTzjZm56MCHf3zVBxH1r7ftU1splxxKYHEgoUUpTo+grEf303rPH5hxENJqDKQEJtko2q9zGeeycWy3JhpKhWT8+NM/sufIhBwKI+Mta+7pkfxKMtd8Qtdbcx4dUQZcFCQ2I6DcAnLUpf6YMPxhIDDOuxC4C6djoQUE6+tKpewWZ1wlRkq0qUhXptKTlzv93aI3jWmE0Fz2TeujpX73F9TaKy9CeMk8vZusfBnqZ1g5GqyIdJq+XrqNR5AahKr9CCcxGSwAAAABJRU5ErkJggg==)&#13;
&#13;
粉丝：&#13;
&#13;
*   商品百科&#13;
    &#13;
*   好价&#13;
    &#13;
*   社区文章&#13;
    &#13;
&#13;
端设置&#13;
&#13;
打开**控制面板** - **硬件与电源** - **不断电系统**&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408bb67574d721.png_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_3/)&#13;
&#13;
首先要确定群晖是否支持此 UPS 的信息采集，点击**设备信息**，我用的山特 TG-BOX 850，OK 的&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408bc05432d8464.png_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_4/)&#13;
&#13;
勾上**启用网络 UPS [服务器](https://www.smzdm.com/fenlei/fuwuqi/)**&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408bc6e73059041.png_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_5/)&#13;
&#13;
在**允许的 DiskStation 设备**里填上 ESXi 的 ip 地址&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408c58169bd2116.png_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_6/)&#13;
&#13;
### 3、ESXi 端设置&#13;
&#13;
ESXi 默认是关闭 SSH 功能的，所以我们首先要打开 ESXi 的 SSH 功能  &#13;
&#13;
进入后台后，打开**管理** - **服务**，找到 TSM 和 TSM-SSH 服务，并将其启动&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408da4ed6b37036.png_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_7/)&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408dd991c692322.png_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_8/)&#13;
&#13;
这样 SSH 功能就能临时使用了，重启后会关闭，如果需要继续使用的，再重新开启就好了&#13;
&#13;
接下来还要修改一下软件的安装策略，打开**管理** - **安全与用户**，点击**接受级别**，将其修改为**社区**&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408de3190414696.png_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_9/)&#13;
&#13;
**4、安装 NutClient**&#13;
&#13;
使用工具 SSH 连接到 ESXi，我这里使用的是 winscp&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408ea64aa902090.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_10/)&#13;
&#13;
将刚刚下载的 NutClient 文件上传到 / tmp [文件夹](https://www.smzdm.com/fenlei/wenjianjia/)下&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62408f3acb1538657.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_11/)&#13;
&#13;
然后解压刚刚上传到 / tmp 目录里的 NutClient 文件，命令：&#13;
&#13;
tar -xzvf NutClient-ESXi-2.7.4-2.2.2.i386.tar.gz&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62409129f3d519647.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_12/)&#13;
&#13;
安装 NutClient，命令：&#13;
&#13;
./upsmon-install.sh  &#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/6240913e02ef96250.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_13/)&#13;
&#13;
看到如上回显信息后，表示安装完成了  &#13;
&#13;
### 5、配置 NutClient&#13;
&#13;
在 ESXi 后台，打开**管理** - **系统** - **高级设置**，在列表中找到 Nut 的相关设置项，可以直接在右上角的搜索框里输入 nut 进行快速的查找，一共有 7 项，如果没有的话，可以尝试重启一下 ESXi&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/624091d0d6b3e7387.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_14/)&#13;
&#13;
需要修改的是&#13;
&#13;
UserVars.NutFinalDelay：60（关机时间，单位为秒，我这设置为 1 分钟后关闭 ESXi）  &#13;
UserVars.NutPassword：secret  &#13;
UserVars.NutUpsName：ups@192.168.1.1（这里为群晖地址）  &#13;
UserVars.NutUser：monuser  &#13;
&#13;
配置完成后，打开**管理** - **服务**，找到 NutClient，如果服务已经启动的话，点击**操作** - **重新启动**，如果服务没有启动，点击**操作** - **启动**，每次修改配置参数后，都需要重启该服务才能生效，另外需要将该服务的策略设置为**随主机启动和停止**&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/624093908135d1955.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_15/)&#13;
&#13;
到这里，ESXi 就可以配合群晖 UPS 实现停电自动关机了，但是 ESXi 里的虚拟机并不能安全的关闭，还需要对虚拟机的开关机进行设置，打开**管理** - **系统**，点击**自动启动**，在**编辑设置**里，配置自动启动，因为目前我只有一个虚拟机，因此只需要一个总的设置就可以了，如果有安装好几个虚拟机的话，还需要对每个虚拟机进行**启用**设置&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/6240948b3a4f51820.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_16/)&#13;
&#13;
**6、连接测试**&#13;
&#13;
通过 SSH 连接 ESXi 后，输入命令：&#13;
&#13;
/opt/nut/bin/upsc ups@192.168.1.1(此为群晖地址，即 ups 服务器 ip)&#13;
&#13;
出现下面这些信息，则表明连接成功  &#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/624097378f86e9162.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_17/)&#13;
&#13;
验证防火墙设置，输入命令：&#13;
&#13;
esxcli network firewall ruleset list&#13;
&#13;
当看到 NutServer 为 true 时，表示正常  &#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/624097a2d68d27624.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_18/)&#13;
&#13;
### 7、断电测试&#13;
&#13;
拔掉 UPS 的电源插头，看看群晖跟软路由是否会先后关机&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/62409881cc48a7144.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_19/)&#13;
&#13;
[![](https://qnam.smzdm.com/202203/28/6240988c159927198.jpg_e1080.jpg)](https://post.smzdm.com/p/az6p6ern/pic_20/)&#13;
&#13;
拔掉 UPS 的电源插头后，UPS 开始报警，提示市电断开，群晖提示进入[电池](https://www.smzdm.com/fenlei/dianchi/)供电模式，3 分钟后，自动关机，软路由也自动关机了&#13;
&#13;
插上 UPS 的电源插头，群晖自动开机，软路由也能自动开机&#13;
&#13;
### 总语&#13;
&#13;
通过以上的配置与测试，以 ESXi 为底层的软路由能配合群晖的 UPS 实现停电后自动关机并在来电后自动开机了，完美的通过一台 UPS 实现了两台设备的自动开关机&#13;
&#13;
![](https://res.smzdm.com/images/emotions/34.png)&#13;
&#13;
最后，如果觉得这个文章对您有一点点帮助的话，也希望您能为我的文章点赞、收藏、评论一下下。</description><guid isPermaLink="true">https://customsshen.github.io/post/li-yong-%20NutClient%20-shi-%20ESXi%20-pei-he-qun-hui-%20UPS%20-shi-xian-ting-dian-zi-dong-guan-ji-_NAS%20-cun-chu-_-shen-me-zhi-de-mai.html</guid><pubDate>Mon, 08 Apr 2024 02:16:22 +0000</pubDate></item><item><title>工控机上安装服务器级虚拟机 vmware ESXi6.7_工控虚拟机_supersolon 的博客 - CSDN 博客</title><link>https://customsshen.github.io/post/gong-kong-ji-shang-an-zhuang-fu-wu-qi-ji-xu-ni-ji-%20vmware%20ESXi6.7_-gong-kong-xu-ni-ji-_supersolon%20-de-bo-ke-%20-%20CSDN%20-bo-ke.html</link><description># [工控机](https://so.csdn.net/so/search?q=%E5%B7%A5%E6%8E%A7%E6%9C%BA&amp;spm=1001.2101.3001.7020)上安装服务器级虚拟机 vmware ESXi6.7&#13;
&#13;
## 1、工具&#13;
&#13;
硬件：&#13;
&#13;
        主机  ：下载资料，制作启动盘&#13;
&#13;
        工控机：配置好点，安装 [esxi](https://so.csdn.net/so/search?q=esxi&amp;spm=1001.2101.3001.7020) 虚拟机&#13;
&#13;
        U 盘：至少 8G&#13;
&#13;
 软件：  &#13;
&#13;
        U 盘引导工具：ventoy-1.0.82&#13;
&#13;
        PE 工具：WePE64_V2.2.iso&#13;
&#13;
        esxi 镜像：ESXi-6.7.0.iso&#13;
&#13;
## 2、安装&#13;
&#13;
### 2.1 用 ventoy 工具制作启动盘&#13;
&#13;
（1）U 盘插入主机（非工控机）&#13;
&#13;
![](https://img-blog.csdnimg.cn/298efbe179054aaa8b3b08356dae7bbc.png)&#13;
&#13;
制作成功后，U 盘名称变成 Ventoy&#13;
&#13;
![](https://img-blog.csdnimg.cn/30e823c84328450a9e07b604acddc1d5.png)&#13;
&#13;
 注： &#13;
&#13;
写盘不成功：换 U 盘、用 [NTFS](https://so.csdn.net/so/search?q=NTFS&amp;spm=1001.2101.3001.7020) 格式化 U 盘&#13;
&#13;
![](https://img-blog.csdnimg.cn/607dc928df434e44b0dad8cc06ad7167.png)&#13;
&#13;
 （2）esxi 及 WinPE 的 iso 文件拷贝到制作好的启动盘里&#13;
&#13;
![](https://img-blog.csdnimg.cn/9f0df1bbd8df4f0ca871ceea1605cc26.png)&#13;
&#13;
### 2.2 WePE 下格式化硬盘（硬盘是新盘可以不考虑）&#13;
&#13;
（1）U 盘插入工控机&#13;
&#13;
（2）U 盘启动&#13;
&#13;
启动工控机，按【Del】键进入 Bios（不同的机器可能不一样），选择 U 盘启动&#13;
&#13;
![](https://img-blog.csdnimg.cn/0a04860fc9094707ab429c4df9ddfd60.png)&#13;
&#13;
（3）进入 WePE&#13;
&#13;
到 iso 镜像选择页面，选 WePE 启动 PE 系统（如果启动异常，选第三种 vmedia 的方式）&#13;
&#13;
注：启动不了 WEPE：换最新版本的 ventoy，最开始用的 ventoy-1.0.64，后来换成 ventoy-1.0.82 的可以了&#13;
&#13;
（4）格式化工控机硬盘&#13;
&#13;
分区工具 - 选中硬盘 -【右键】-【删除所有分区】-【新建分区】-【保存更改】&#13;
&#13;
![](https://img-blog.csdnimg.cn/3f74c30ae0af4b619bd3e15065a53524.png)&#13;
&#13;
（5）重启重新进 U 盘启动盘&#13;
&#13;
### 2.3 安装 ESXi&#13;
&#13;
（1）启动 Esxi 镜像&#13;
&#13;
U 盘启动到选择 iso 页面，选择 esxi 镜像（选第一种，normal 的启动方式），跑码&#13;
&#13;
![](https://img-blog.csdnimg.cn/21c803b3bf564d598df56d757b0fda04.png)&#13;
&#13;
（2）设置 esxi 安装信息&#13;
&#13;
![](https://img-blog.csdnimg.cn/5d7da7c34ba64e3e9727a5561435d8e2.png)&#13;
&#13;
 欢迎界面 -【Enter】继续&#13;
&#13;
![](https://img-blog.csdnimg.cn/db47120c068d4ea5af87e20a2a4e2a8c.png)&#13;
&#13;
 许可声明界面 -【F11】接受并继续&#13;
&#13;
![](https://img-blog.csdnimg.cn/14da82f8eb8c4fc29b66cc91525d2dd1.png)&#13;
&#13;
 选择安装到硬盘（黄色表示选中） - 【Enter】继续&#13;
&#13;
![](https://img-blog.csdnimg.cn/e0f59909fbd446c18a7ded4623c48fd0.png)&#13;
&#13;
 再次确认 - 【（Enter）OK】继续&#13;
&#13;
![](https://img-blog.csdnimg.cn/217a18e6005344928e8400b4a5b99d03.png)&#13;
&#13;
 选择键盘布局，默认的【US Default】即可，【Enter】继续&#13;
&#13;
![](https://img-blog.csdnimg.cn/0626905b94434aa59b6ed95d5e464069.png)&#13;
&#13;
 设置密码 - 【Enter】继续&#13;
&#13;
需要复杂密码（字符、数字、字符且不能出现经常出现的密码组合） ，密码示例 Abc12345.&#13;
&#13;
记住密码，后面要用！！！&#13;
## 密码无法保存 ，可以强制ALT+TAB&#13;
&#13;
![](https://img-blog.csdnimg.cn/e156640d90e548d8b1d3879f3c2723c9.png)&#13;
&#13;
确认安装信息 - 【（F11）Install】 &#13;
&#13;
![](https://img-blog.csdnimg.cn/cf106cdc54e34c7b90f52d79ae5bf05b.png)&#13;
&#13;
（3）开始安装 esxi&#13;
&#13;
![](https://img-blog.csdnimg.cn/00fb65460e094f74a9bf58ba7c26103c.png)&#13;
&#13;
 安装完成 - 拔掉 U 盘 - 【（Enter）Reboot】 -  重启&#13;
&#13;
![](https://img-blog.csdnimg.cn/2b99e44e2fe248a6b695b97069470283.png)&#13;
&#13;
 esxi 系统启动成功&#13;
&#13;
![](https://img-blog.csdnimg.cn/4ab54648c3384cae8feadd70ebf4c94b.png)&#13;
&#13;
## 3、系统设置&#13;
&#13;
### 3.1 进入设置页面&#13;
&#13;
【F2】键 - 输入设置的密码 -【Enter】继续&#13;
&#13;
![](https://img-blog.csdnimg.cn/b38c36715ef6442eaae6dd9856f3fbfc.png)&#13;
&#13;
 进入配置页面进行配置管理&#13;
&#13;
![](https://img-blog.csdnimg.cn/3a38ecf815344a04bb5b4e6278e1e6d0.png)&#13;
&#13;
###  3.2 设置网络&#13;
&#13;
选中【Configure Management Network】-【Enter】&#13;
&#13;
![](https://img-blog.csdnimg.cn/f3b67afd6118454f857dc3951571c4be.png)&#13;
&#13;
 设置 IPv4：选中【IPv4 Configuration】 -【Enter】&#13;
&#13;
![](https://img-blog.csdnimg.cn/2251ed6ed698408e8821a643481a1d96.png)&#13;
&#13;
 设置静态 IP 地址：下移到第三项 - 【空格】选中 - 设置信息 - 【Enter】保存&#13;
&#13;
        根据实际情况进行设置：比如设备都在 192.168.100.xxx 网段，则可以进行如下设置：&#13;
&#13;
IPv4 Address：192.168.100.2（自定义，esxi 的后台管理地址，浏览器登录用）&#13;
&#13;
Subnet Mask：255.255.255.0&#13;
&#13;
Default Gateway：192.168.100.1（后面要安装的 openwrt 的地址，openwrt 作为主路由）&#13;
&#13;
![](https://img-blog.csdnimg.cn/8f5ad34c547640a280af96ea4a79792f.png)&#13;
&#13;
### 3.3 设置 esxi 管理网口&#13;
&#13;
选中【Network Adapters】-【Enter】进入&#13;
&#13;
![](https://img-blog.csdnimg.cn/de464b1d26df4c799b8d35ff10f27580.png)&#13;
&#13;
 默认选择第一个网口，可以根据实际情况设置，设置完【Enter】保存&#13;
&#13;
![](https://img-blog.csdnimg.cn/fa41c02d97e141c393a3a18d1d845fcd.png)&#13;
&#13;
 确认更改信息：【Esc】后退 - 【Y】确认&#13;
&#13;
![](https://img-blog.csdnimg.cn/18fe23fee32b406f8aaa4d471960fbad.png)&#13;
&#13;
### 3.4 清除密码（此步非必须，不想设置密码用）    &#13;
&#13;
【Reset System Configuration】-【F11】- 确认 -【Enter】&#13;
&#13;
### 3.5 退到 esxi 信息界面&#13;
&#13;
 【esc】退到 esxi 信息界面&#13;
&#13;
![](https://img-blog.csdnimg.cn/83d925bcee2c4d9ba5c5de57046aa039.png)&#13;
&#13;
##  4、设置主机&#13;
&#13;
将主机的 IP 地址设置为跟工控机安装的 esxi 一个网段（比如：192.168.100.5）&#13;
&#13;
![](https://img-blog.csdnimg.cn/5a41e6d1666944c49fc0c3362d87ead4.png)&#13;
&#13;
## 5、登录 esxi 后台&#13;
&#13;
### 5.1 连接网线&#13;
&#13;
一段在工控机的第一个网口上，另一端连接主机&#13;
&#13;
### 5.2 登录后台&#13;
&#13;
 （1）浏览器输入 esxi 设置的 IP 地址（192.168.100.1）到 esxi 的登录界面&#13;
&#13;
![](https://img-blog.csdnimg.cn/c2e5a32f8c7048009914d471dfbedb98.png)&#13;
&#13;
 （2）用户名、密码进入&#13;
&#13;
![](https://img-blog.csdnimg.cn/8b9f85f37cc6477c9b602d94828a5c1a.png)&#13;
&#13;
 （3）esxxi 安装完成。</description><guid isPermaLink="true">https://customsshen.github.io/post/gong-kong-ji-shang-an-zhuang-fu-wu-qi-ji-xu-ni-ji-%20vmware%20ESXi6.7_-gong-kong-xu-ni-ji-_supersolon%20-de-bo-ke-%20-%20CSDN%20-bo-ke.html</guid><pubDate>Mon, 08 Apr 2024 02:15:54 +0000</pubDate></item><item><title>奔哥一下群晖的ABB套件</title><link>https://customsshen.github.io/post/ben-ge-yi-xia-qun-hui-de-ABB-tao-jian.html</link><description># 起因&#13;
前段时间研究all in boom的系统备份与恢复，测试了ABB(Active Backup for Business)套件对 vSphere备份恢复，并做了一些数据实验，同时请教了一些大神，了解到对esxi系统下虚拟机的备份是全局备份，先是备份了指定虚拟机后，在物理删除改虚拟机，通过ABB执行恢复，打开虚拟机发现，不需要其他操作，立马恢复到了之前的状态。</description><guid isPermaLink="true">https://customsshen.github.io/post/ben-ge-yi-xia-qun-hui-de-ABB-tao-jian.html</guid><pubDate>Mon, 08 Apr 2024 02:12:32 +0000</pubDate></item><item><title>[VMware]ESXI 下硬盘的两种直通方式</title><link>https://customsshen.github.io/post/%5BVMware%5DESXI%20-xia-ying-pan-de-liang-zhong-zhi-tong-fang-shi.html</link><description>文章来自：https://rmbz.net/archives/vmware-esxi-passthrough&#13;
&#13;
最近再搞 ESXI，把原来的 “黑群晖” 改成 ESXI；因为群晖里有数据，为了不想迁移数据所以需要对硬盘做直通&#13;
&#13;
### 0x01 RDM 直通&#13;
&#13;
通过 RDM（Raw Device Mapping）方式，将磁盘应设为本地 VMDK  &#13;
优点：不需要增加硬件和修改任何配置文件，配置起来很易用  &#13;
缺点：如果需要对硬盘调整，需要重新映射；群晖无法获取到 SMART 信息&#13;
&#13;
1. 通过命令`ls -l /dev/disks`查看当前挂载的所有磁盘信息。</description><guid isPermaLink="true">https://customsshen.github.io/post/%5BVMware%5DESXI%20-xia-ying-pan-de-liang-zhong-zhi-tong-fang-shi.html</guid><pubDate>Mon, 08 Apr 2024 02:10:09 +0000</pubDate></item></channel></rss>